<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script>
  Pi.init({ version: "2.0", sandbox: false });

  function makePayment() {
    const scopes = ['username', 'payments'];
    const onIncompletePaymentFound = (payment) => {
      console.log("Incomplete payment found:", payment);
    };

    Pi.authenticate(scopes, onIncompletePaymentFound)
      .then(function(auth) {
        console.log("Authentication success", auth);
        const paymentData = {
          amount: 0.01,
          memo: "Test thanh toán thật",
          metadata: { type: "test" }
        };
        Pi.createPayment(paymentData, onIncompletePaymentFound)
          .then(function(payment) {
            console.log("Payment completed:", payment);
            alert("Thanh toán thành công!");
          })
          .catch(function(error) {
            console.error("Payment failed:", error);
            alert("Thanh toán thất bại: " + error);
          });
      })
      .catch(function(error) {
        console.error("Authentication failed:", error);
        alert("Đăng nhập thất bại: " + error);
      });
  }
</script>
