<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PiChordify Kingdom — v20.0</title>

  <!-- ===== Palette / Reset ===== -->
  <style>
    :root{
      --bg:#0f1320; --panel:#131a2a; --muted:#8892b0; --text:#e6e9ef;
      --brand1:#8a5cff; --brand2:#49c6ff; --accent:#9b7bff; --ok:#24d17e; --warn:#ffb347; --err:#ff5d73;
      --ring:rgba(138,92,255,.35);
      --mono:"SFMono-Regular","JetBrains Mono",ui-monospace,Consolas,monospace;
      --sans:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Noto Sans",sans-serif;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:var(--sans)}
    h1,h2,h3{margin:0 0 .5rem}
    small{color:var(--muted)}
    a{color:var(--brand2);text-decoration:none}

    .wrap{
      max-width:1280px;
      margin:0 auto;
      padding:0 16px;
    }

    .grid{
      display:block;
      width:100%;
    }
    textarea{min-height:260px;}

    @media(min-width:970px){
      .grid{
        display:block;
        width:100%;
      }
    }

    /* Log box có thể kéo dãn + mode fullscreen */
    #log{
      resize:vertical;
      min-height:160px;
      max-height:60vh;
    }
    .log-max{
      height:60vh !important;
    }

    .card{
      background:var(--panel);
      border:1px solid #1b2236;
      border-radius:14px;
      padding:16px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      margin-bottom:16px;
    }
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    select,input,button,textarea{
      background:#0c1322;
      color:var(--text);
      border:1px solid #25304d;
      border-radius:12px;
      padding:10px 12px;
      font-size:15px;
    }
    select,input,textarea{outline:none}
    select:focus,input:focus,textarea:focus,button:focus{
      box-shadow:0 0 0 3px var(--ring);
      border-color:#3b4b77;
    }
    button{cursor:pointer}
    .btn{background:linear-gradient(90deg,var(--brand1),var(--brand2));border:none}
    .btn.ghost{background:#0c1322}
    .btn.bad{background:#2a0f18;border:1px solid #4b1122}
    .btn.ok{background:#0f2a22;border:1px solid #11553c}
    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 10px;
      border-radius:999px;
      background:#0e1629;
      border:1px solid #232e4a;
      font-size:13px;
      color:#cfd6e6;
    }

    h1.title{font-weight:800;letter-spacing:.5px;font-size:42px;line-height:1.05}
    .ver{margin-left:10px;border-radius:999px;padding:6px 10px;background:#1a2033;border:1px solid #2a365d;color:#bfc7de;font-weight:600}

    .mono{font-family:var(--mono);white-space:pre-wrap}
    textarea{min-height:160px;width:100%;resize:vertical}
    #suggest{min-height:112px}

    .kbd{
      padding:2px 6px;
      border-radius:6px;
      border:1px solid #2a2f45;
      background:#0e1324;
      font-family:var(--mono);
      font-size:12px;
      color:#c6cee1;
    }
    .iconTab{display:flex;gap:10px}
    .iconTab button{
      flex:1;
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:center;
      padding:12px;
      border-radius:14px;
      background:#0e1629;
      border:1px solid #252c44;
    }
    .iconTab button.active{
      outline:2px solid var(--ring);
      border-color:#3b48ff;
      background:#121a30;
    }
    .iconTab img{height:18px;opacity:.9}
    .rightBox{min-height:320px}
    .hidden{display:none}
    .small{font-size:13px;color:#9fb0d1}

    /* === MK HERO =================== */
    .mk-hero {
      position: relative;
      padding: 2.5rem 1.5rem 2rem;
      background-image:
        linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(76, 29, 149, 0.96)),
        url("assets/musickingdom-christmas-bg.jpg");
      background-size: cover;
      background-position: center;
      border-bottom: 1px solid rgba(148, 163, 184, 0.4);
    }

    .mk-hero-inner {
      max-width: 960px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 1.75rem;
    }

    .mk-title-gradient{
      background:linear-gradient(90deg,#ff7bd5 0%,#6ea8ff 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    .mk-hero-text h1 {
      margin: 0 0 0.35rem;
      font-size: clamp(1.9rem, 2.6vw, 2.4rem);
      font-weight: 800;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .mk-hero-text p {
      margin: 0;
      color: #e5e7eb;
      font-size: 0.98rem;
      max-width: 30rem;
      line-height: 1.55;
    }

    .mk-version-icon{
      width:46px;
      height:auto;
      margin-left:10px;
      border-radius:12px;
      box-shadow:0 8px 24px rgba(0,0,0,0.35);
      vertical-align:middle;
    }
    @media(min-width:768px){
      .mk-version-icon{width:56px;}
    }

    /* Focus mode */
    body.focus-mode .mk-hero { display:none; }
    body.focus-mode .rightBox { display:none; }
    body.focus-mode .wrap { max-width:980px; }
    body.focus-mode #lyrics,
    body.focus-mode #suggest { min-height:220px; }
    #currentChord{
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      background:#111827;
      border:1px solid #374151;
      min-width:60px;
      font-weight:600;
    }
    body.focus-mode #currentChord{
      font-size:17px;
      padding:6px 14px;
    }
    .chord-pulse{
      animation:chordPulse .28s ease-out;
    }
    @keyframes chordPulse{
      0%{transform:scale(1);}
      50%{transform:scale(1.12);}
      100%{transform:scale(1);}
    }
    body.focus-mode textarea{
      font-size:16px;
      line-height:1.5;
    }
    body.focus-mode .title{
      font-size:36px;
    }
  </style>
</head>

<body>

<header class="mk-hero">
  <div class="mk-hero-inner">
    <div class="mk-hero-text">
      <h1 class="mk-title-gradient">MUSICKINGDOM</h1>
      <p>
        Công cụ gợi ý hợp âm &amp; luyện hát trong hệ sinh thái Pi –
        không gian thờ phượng và sáng tạo dành cho Pioneers.
      </p>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="row" style="justify-content:space-between;align-items:flex-end;margin-bottom:10px">
    <h1 class="title">PiChordify Kingdom</h1>
    <div class="row" style="align-items:center;gap:8px">
      <span class="ver">v20.0 — Chord Runner LIVE</span>
      <img src="assets/musickingdom-golden-turtle.jpg"
           alt="Musickingdom Icon"
           class="mk-version-icon" />
      <button id="btnFocusMode"
              class="btn ghost"
              style="padding:6px 10px;font-size:12px;margin-left:4px;">
        Chế độ tập trung
      </button>
    </div>
  </div>

  <div class="grid">
    <!-- ===== Left: Editor ===== -->
    <!-- NGUYÊN BẢN như v8.10, không đổi gì trong thân form, chỉ rút gọn comment để trả lời ngắn -->
    <!-- (Anh có thể giữ nguyên phần HTML editor từ file cũ, vì không có gì thay đổi logic) -->

    <!-- Toàn bộ block từ <div class="card"> bên trái tới <audio id="audio"> dưới cùng -->
    <!-- ... GIỮ NGUYÊN NHƯ FILE V8.10 CỦA ANH ... -->

    <!-- ===== Right: Pi Login / Pay & Log ===== -->
    <!-- Toàn bộ block bên phải cũng giữ nguyên, chỉ khác câu © ở cuối và script version -->
  </div>
</div>

<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="index.js?v=20.0.0"></script>

</body>
</html>
