<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PiChordify Kingdom üé∂</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
  <style>
    body {
      background-color: #f2ecff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #8000c8;
      font-size: 2.5em;
    }
    select, button {
      font-size: 1em;
      padding: 10px;
      margin: 10px;
    }
    .premium-option {
      margin: 10px 0;
    }
    .highlight {
      font-weight: bold;
      color: #8000c8;
    }
  </style>
</head>
<body>
  <h1>üé∂ Welcome to <span class="highlight">PiChordify Kingdom</span> üé∂</h1>
  <p>Kh√°m ph√° h·ª£p √¢m cho c√°c nh·∫°c c·ª• ph·ªï bi·∫øn!</p>

  <div>
    <label>üéµ Ch·ªçn nh·∫°c c·ª•:
      <select>
        <option>-- Ch·ªçn --</option>
        <option>Guitar</option>
        <option>Piano</option>
        <option>Ukulele</option>
      </select>
    </label>
  </div>

  <div>
    <label>üéº Ch·ªçn b√†i nh·∫°c:
      <select>
        <option>-- Ch·ªçn --</option>
        <option>Happy Birthday</option>
        <option>We Wish You A Merry Christmas</option>
        <option>Canon in D</option>
      </select>
    </label>
  </div>

  <p>üé∂ Ch∆∞a c√≥ h·ª£p √¢m n√†o ƒë∆∞·ª£c ch·ªçn üé∂</p>

  <button onclick="loginWithPi()">üîê ƒêƒÉng nh·∫≠p v·ªõi Pi</button>

  <div class="premium-option">
    <label for="plan">üíé Ch·ªçn g√≥i h·ªçc:</label>
    <select id="plan">
      <option value="0.3">G√≥i D·∫°o Nh·∫°c (0.3 Pi)</option>
      <option value="1">G√≥i Ho√†ng T·ª≠ Ph√≠m Nh·∫°c (1 Pi)</option>
      <option value="3.14">G√≥i Master PiChordify (3.14 Pi)</option>
      <option value="31.4159">G√≥i Divine GCV Edition (31.4159 Pi)</option>
    </select>
  </div>

  <button onclick="buyPremium()">üíé Mua G√≥i Premium</button>

  <script>
    Pi.init({ version: "2.0", sandbox: false });

    function loginWithPi() {
      const scopes = ['username', 'payments'];
      Pi.authenticate(scopes, function (payment) {
        console.log('Incomplete payment found:', payment);
      }).then(function (auth) {
        alert("Xin ch√†o, " + auth.user.username);
      }).catch(function (error) {
        alert("ƒêƒÉng nh·∫≠p th·∫•t b·∫°i: " + error);
      });
    }

    function buyPremium() {
      const planValue = document.getElementById("plan").value;
      const planName = document.getElementById("plan").selectedOptions[0].text;
      if (planValue == "31.4159") {
        const confirmed = confirm("‚ö†Ô∏è C·∫£nh b√°o: B·∫°n s·∫Øp ƒë·∫°t c·∫£nh gi·ªõi √¢m nh·∫°c th·∫ßn th√°nh v·ªõi " + planName + ". Ti·∫øp t·ª•c?");
        if (!confirmed) return;
      }
      Pi.createPayment({
        amount: planValue,
        memo: "Thanh to√°n g√≥i: " + planName,
        metadata: { type: "premium_plan", name: planName }
      }, {
        onReadyForServerApproval: function (paymentId) {
          console.log("Ch·ªù duy·ªát...", paymentId);
        },
        onReadyForServerCompletion: function (paymentId, txid) {
          console.log("Ho√†n t·∫•t giao d·ªãch:", txid);
          alert("C·∫£m ∆°n b·∫°n ƒë√£ mua g√≥i: " + planName);
        },
        onCancel: function (paymentId) {
          alert("B·∫°n ƒë√£ hu·ª∑ thanh to√°n.");
        },
        onError: function (error, payment) {
          alert("L·ªói thanh to√°n: " + error);
        }
      });
    }
  </script>
</body>
</html>
