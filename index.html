<!doctype html>  
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PiChordify Kingdom ‚Äî v7.6</title>

<!-- ===== Palette / Reset ===== -->
<style>
:root{
  --bg:#0f1320; --panel:#131a2a; --muted:#8892b0; --text:#e6e9ef;
  --brand1:#8a5cff; --brand2:#49c6ff; --accent:#9b7bff; --ok:#24d17e; --warn:#ffb347; --err:#ff5d73;
  --ring:rgba(138,92,255,.35);
  --mono:"SFMono-Regular","JetBrains Mono",ui-monospace,Consolas,monospace;
  --sans:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Noto Sans",sans-serif;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:var(--sans)}
h1,h2,h3{margin:0 0 .5rem}
small{color:var(--muted)}
a{color:var(--brand2);text-decoration:none}
.wrap{max-width:1200px;margin:auto;padding:20px}
.grid{display:grid;gap:16px}
@media(min-width:970px){.grid{grid-template-columns:1.2fr .9fr}}

.card{background:var(--panel);border:1px solid #1b2236;border-radius:14px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
select,input,button,textarea{background:#0c1322;color:var(--text);border:1px solid #25304d;border-radius:12px;padding:10px 12px;font-size:15px}
select,input,textarea{outline:none}
select:focus,input:focus,textarea:focus,button:focus{box-shadow:0 0 0 3px var(--ring);border-color:#3b4b77}
button{cursor:pointer}
.btn{background:linear-gradient(90deg,var(--brand1),var(--brand2));border:none}
.btn.ghost{background:#0c1322}
.btn.bad{background:#2a0f18;border:1px solid #4b1122}
.btn.ok{background:#0f2a22;border:1px solid #11553c}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#0e1629;border:1px solid #232e4a;font-size:13px;color:#cfd6e6}

h1.title{font-weight:800;letter-spacing:.5px;font-size:42px;line-height:1.05}
.ver{margin-left:10px;border-radius:999px;padding:6px 10px;background:#1a2033;border:1px solid #2a365d;color:#bfc7de;font-weight:600}

.mono{font-family:var(--mono);white-space:pre-wrap}
textarea{min-height:160px;width:100%;resize:vertical}
#suggest{min-height:112px}
.progress{height:8px;border-radius:999px;background:#0c1322;border:1px solid #25304d;position:relative}
.progress>i{position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(90deg,#3e5cf5,#34d1ff);border-radius:999px}
.kbd{padding:2px 6px;border-radius:6px;border:1px solid #2a2f45;background:#0e1324;font-family:var(--mono);font-size:12px;color:#c6cee1}
.iconTab{display:flex;gap:10px}
.iconTab button{flex:1;display:flex;align-items:center;gap:10px;justify-content:center;padding:12px;border-radius:14px;background:#0e1629;border:1px solid #252c44}
.iconTab button.active{outline:2px solid var(--ring);border-color:#3b48ff;background:#121a30}
.iconTab img{height:18px;opacity:.9}
.rightBox{min-height:320px}
.hidden{display:none}
.small{font-size:13px;color:#9fb0d1}

/* === MK HERO (Musickingdom header) =================== */

.mk-hero {
  position: relative;
  padding: 2.5rem 1.5rem 2rem;
  background-image:
    linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(76, 29, 149, 0.96)),
    url("assets/musickingdom-christmas-bg.jpg");
  background-size: cover;
  background-position: center;
  border-bottom: 1px solid rgba(148, 163, 184, 0.4);
}

.mk-hero-inner {
  max-width: 960px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  gap: 1.75rem;
}

.mk-title-gradient{
  background:linear-gradient(90deg,#ff7bd5 0%,#6ea8ff 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.mk-hero-text h1 {
  margin: 0 0 0.35rem;
  font-size: clamp(1.9rem, 2.6vw, 2.4rem);
  font-weight: 800;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

.mk-hero-text p {
  margin: 0;
  color: #e5e7eb;
  font-size: 0.98rem;
  max-width: 30rem;
  line-height: 1.55;
}

/* Icon R√πa c·∫°nh version */
.mk-version-icon{
  width:46px;
  height:auto;
  margin-left:10px;
  border-radius:12px;
  box-shadow:0 8px 24px rgba(0,0,0,0.35);
  vertical-align:middle;
}
@media(min-width:768px){
  .mk-version-icon{width:56px;}
}
  /* === Focus mode: t·∫≠p trung v√πng h·ª£p √¢m / player === */
body.focus-mode .mk-hero {
  display: none;
}

body.focus-mode .rightBox {
  display: none;
}

body.focus-mode .wrap {
  max-width: 980px;
}

/* Cho √¥ L·ªùi + g·ª£i √Ω cao h∆°n ch√∫t khi focus */
body.focus-mode #lyrics,
body.focus-mode #suggest {
  min-height: 220px;
}
/* H·ª£p √¢m ƒëang ph√°t ‚Äì pill hi·ªÉn th·ªã */
#currentChord{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  background:#111827;
  border:1px solid #374151;
  min-width:60px;
  font-weight:600;
}

/* Khi Focus mode: ch·ªØ to h∆°n ch√∫t cho d·ªÖ nh√¨n */
body.focus-mode #currentChord{
  font-size:17px;
  padding:6px 14px;
}

/* Khi ƒë·ªïi chord th√¨ pulse nh·∫π */
.chord-pulse{
  animation:chordPulse .28s ease-out;
}
@keyframes chordPulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.12);}
  100%{transform:scale(1);}
}

/* Zoom nh·∫π cho v√πng luy·ªán t·∫≠p khi Focus mode */
body.focus-mode textarea{
  font-size:16px;
  line-height:1.5;
}
body.focus-mode .title{
  font-size:36px;
}

</style>
</head>

<body>

<header class="mk-hero">
  <div class="mk-hero-inner">
    <div class="mk-hero-text">
      <h1 class="mk-title-gradient">MUSICKINGDOM</h1>
      <p>
        C√¥ng c·ª• g·ª£i √Ω h·ª£p √¢m &amp; luy·ªán h√°t trong h·ªá sinh th√°i Pi ‚Äì
        kh√¥ng gian th·ªù ph∆∞·ª£ng v√† s√°ng t·∫°o d√†nh cho Pioneers.
      </p>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="row" style="justify-content:space-between;align-items:flex-end;margin-bottom:10px">
    <h1 class="title">PiChordify Kingdom</h1>
    <div class="row" style="align-items:center;gap:8px">
      <span class="ver">v8.2 ‚Äî Chord Runner</span>
      <img src="assets/musickingdom-golden-turtle.jpg"
           alt="Musickingdom Icon"
           class="mk-version-icon"/>
      <button id="btnFocusMode"
              class="btn ghost"
              style="padding:6px 10px;font-size:12px;margin-left:4px;">
        Ch·∫ø ƒë·ªô t·∫≠p trung
      </button>
    </div>
  </div>


  <div class="grid">
    <!-- ===== Left: Editor ===== -->
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <div>
          <div class="small" style="margin-bottom:8px">Nh·∫°c c·ª•</div>
          <div class="iconTab" role="tablist" aria-label="instrument">
            <button id="tabPiano" class="active" aria-selected="true"><img alt="piano" src="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Crect width='24' height='14' y='5' rx='3' fill='%23aab7ef'/%3E%3Crect x='3' y='5' width='3' height='14' fill='%230c1322'/%3E%3Crect x='8' y='5' width='2' height='14' fill='%230c1322'/%3E%3Crect x='12' y='5' width='2' height='14' fill='%230c1322'/%3E%3Crect x='16' y='5' width='2' height='14' fill='%230c1322'/%3E%3Crect x='19' y='5' width='3' height='14' fill='%230c1322'/%3E%3C/svg%3E"/>Piano</button>
            <button id="tabGuitar"><img alt="guitar" src="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath d='M18 6l3-3 2 2-3 3a3 3 0 01-3 3l-2 2 2 2-3 3-4-4 3-3 2 2 2-2a3 3 0 003-3z' fill='%23ff7d7d'/%3E%3C/svg%3E"/>Guitar</button>
            <button id="tabUke"><img alt="ukulele" src="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Ccircle cx='8' cy='16' r='5' fill='%23b5e6ff'/%3E%3Crect x='12' y='14' width='8' height='4' rx='2' fill='%237bd1ff'/%3E%3Crect x='20' y='13' width='3' height='6' rx='1' fill='%237bd1ff'/%3E%3C/svg%3E"/>Ukulele</button>
          </div>
        </div>
        <div>
          <div class="small" style="margin-bottom:8px">Gi·ªçng (key)</div>
          <div class="row">
            <select id="selKey"></select>
            <div class="row">
              <button id="btnDown" class="btn ghost" title="Transpose -1">‚àí1</button>
              <button id="btnUp"   class="btn ghost" title="Transpose +1">+1</button>
              <span class="badge"><span id="transposeView">0</span> semitones</span>
            </div>
          </div>
        </div>
        <div>
          <div class="small" style="margin-bottom:8px">Ti·∫øn tr√¨nh</div>
          <select id="selProg">
            <option>I‚ÄìV‚Äìvi‚ÄìIV</option>
            <option>vi‚ÄìIV‚ÄìI‚ÄìV</option>
            <option>I‚Äìvi‚ÄìIV‚ÄìV</option>
            <option>ii‚ÄìV‚ÄìI</option>
            <option>12-bar</option>
          </select>
        </div>
      </div>

      <div class="row" style="margin-top:14px">
        <input id="title" placeholder="T√™n b√†i" style="flex:1"/>
        <button id="btnSuggest" class="btn">T·ª± g·ª£i √Ω h·ª£p √¢m</button>
      </div>

      <div class="row" style="margin-top:12px">
        <div style="flex:1">
          <div class="small">L·ªùi + h·ª£p √¢m (m·ªói d√≤ng c√≥ m·ªëc th·ªùi gian ‚Äî d·∫°ng: <span class="kbd">mm:ss Em / D</span>)</div>
          <textarea id="lyrics" placeholder="00:12   Em  /  D ..."></textarea>
        </div>
        <div style="flex:1">
          <div class="small">G·ª£i √Ω h·ª£p √¢m</div>
          <textarea id="suggest" class="mono" readonly></textarea>
        </div>
      </div>

      <!-- ===== Audio ===== -->
      <div style="margin-top:10px">
        <div class="row">
          <input id="audioUrl" placeholder="https://‚Ä¶/song.mp3" style="flex:1"/>
          <input id="filePick" type="file" accept="audio/mpeg" class="hidden"/>
          <button id="btnPick" class="btn ghost">Ch·ªçn MP3</button>
          <button id="btnLoad" class="btn ghost">Load</button>
        </div>
        <div class="row" style="margin-top:10px;align-items:center">
          <button id="btnPlay" class="btn">Play</button>
          <button id="btnPause" class="btn ghost">Pause</button>
          <button id="btnStop" class="btn bad">Stop</button>
          <span id="time" class="mono small">0:00 / 0:00</span>
        </div>
     <div class="progress" style="margin-top:8px"><i id="bar"></i></div>

<!-- Chord Runner: hi·ªÉn th·ªã h·ª£p √¢m ƒëang ph√°t -->
<div class="row" style="margin-top:6px;align-items:center">
  <span class="small">üéº H·ª£p √¢m ƒëang ph√°t:</span>
  <span id="currentChord" class="mono small" style="margin-left:6px;white-space:pre;"></span>
</div>

<!-- ===== Local save / Export ===== -->
<div class="row" style="margin-top:12px">

  <button id="btnSave" class="btn ghost">L∆∞u t·∫°m (tr√¨nh duy·ªát)</button>
  <button id="btnLoadLocal" class="btn ghost">M·ªü b·∫£n ƒë√£ l∆∞u</button>
  <button id="btnShare" class="btn">Chia s·∫ª b√†i h·ªçc</button>
  <button id="btnPDF" class="btn ok">Xu·∫•t Lead Sheet (PDF)</button>
  <span class="small">
    D√†nh cho h·ªçc & chia s·∫ª: l∆∞u t·∫°m tr√™n m√°y, ho·∫∑c t·∫°o 1 ƒë∆∞·ªùng link ƒë·ªÉ g·ª≠i cho ng∆∞·ªùi kh√°c m·ªü l·∫°i ƒë√∫ng b√†i n√†y.
  </span>
</div>

      <audio id="audio" preload="auto"></audio>
    </div>

    <!-- ===== Right: Pi Login / Pay & Log ===== -->
    <div class="card rightBox">
      <div class="row" style="justify-content:space-between;align-items:center">
        <h3>ƒêƒÉng nh·∫≠p & thanh to√°n</h3>
        <span class="badge">Pi Payment (LIVE)</span>
      </div>
      <div class="row" style="margin-top:8px">
        <button id="btnPiLogin" class="btn ghost">Pi Login</button>
        <button id="btnCheck" class="btn ghost">Ki·ªÉm tra Premium</button>
        <button id="btnPiPay" class="btn">Pi Pay (LIVE)</button>
      </div>

 <details style="margin-top:10px">
  <summary class="small" style="cursor:pointer;">
    ‚öôÔ∏è C√†i ƒë·∫∑t backend (dev) ‚Äì ch·ªâ ch·ªânh khi setup
  </summary>

  <div style="margin-top:6px; padding:6px; background:#151515; border-radius:6px;">
    <input id="txtBackend" placeholder="Backend URL" 
           style="width:75%; padding:6px; border-radius:6px; border:1px solid #333; background:#000; color:#fff;">
    <button onclick="localStorage.setItem('backend', txtBackend.value); location.reload()"
            style="padding:6px 12px; margin-left:4px; border-radius:6px; background:#4b7bff; border:none; color:white;">
      Save backend
    </button>
    <div style="margin-top:4px; font-size:12px; color:#aaa;">
      Current: <span id="backendNow"></span>
    </div>
  </div>
</details>

      <script>
        // C·∫≠p nh·∫≠t hi·ªÉn th·ªã backend ngay sau khi DOM ƒëo·∫°n n√†y s·∫µn s√†ng
        (function () {
          var span = document.getElementById("backendNow");
          if (span) {
            span.textContent = localStorage.getItem("backend") || "(none)";
          }
        })();
      </script>

      <div style="margin-top:12px">
        <div class="small">Log</div>
        <textarea id="log" class="mono" style="height:260px"></textarea>
        <div class="small">Console mirror (copy/paste ƒë∆∞·ª£c)</div>
      </div>
    </div>
  </div>

  <div class="small" style="margin-top:10px">¬© PiChordify Kingdom ‚Äî Hackathon demo ‚Äúc√≥ nh·∫°c th·∫≠t‚Äù</div>
  <div class="small">¬© PiChordify Kingdom ‚Ä¶</div>

<div class="small" ‚Ä¶>¬© PiChordify Kingdom ‚Äî Hackathon demo‚Ä¶</div>

<script src="index.js"></script>
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

</body>
</html>
