<!-- index.html -->

<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PiChordify Kingdom — v8.10</title>

  <style>
  :root{
    --bg:#0f1320; --panel:#131a2a; --muted:#8892b0; --text:#e6e9ef;
    --brand1:#8a5cff; --brand2:#49c6ff; --accent:#9b7bff; --ok:#24d17e; --warn:#ffb347; --err:#ff5d73;
    --ring:rgba(138,92,255,.35);
    --mono:"SFMono-Regular","JetBrains Mono",ui-monospace,Consolas,monospace;
    --sans:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Noto Sans",sans-serif;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:var(--sans)}
  h1,h2,h3{margin:0 0 .5rem}
  small{color:var(--muted)}
  a{color:var(--brand2);text-decoration:none}

  .wrap{
    max-width:1280px;
    margin:0 auto;
    padding:0 16px;
  }
  .grid{
    display:block;
    width:100%;
  }
  textarea{min-height:260px;}

  @media(min-width:970px){
    .grid{
      display:block;
      width:100%;
    }
  }

  .card{background:var(--panel);border:1px solid #1b2236;border-radius:14px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  select,input,button,textarea{background:#0c1322;color:var(--text);border:1px solid #25304d;border-radius:12px;padding:10px 12px;font-size:15px}
  select,input,textarea{outline:none}
  select:focus,input:focus,textarea:focus,button:focus{box-shadow:0 0 0 3px var(--ring);border-color:#3b4b77}
  button{cursor:pointer}
  .btn{background:linear-gradient(90deg,var(--brand1),var(--brand2));border:none}
  .btn.ghost{background:#0c1322}
  .btn.bad{background:#2a0f18;border:1px solid #4b1122}
  .btn.ok{background:#0f2a22;border:1px solid #11553c}
  .badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#0e1629;border:1px solid #232e4a;font-size:13px;color:#cfd6e6}

  h1.title{font-weight:800;letter-spacing:.5px;font-size:42px;line-height:1.05}
  .ver{margin-left:10px;border-radius:999px;padding:6px 10px;background:#1a2033;border:1px solid #2a365d;color:#bfc7de;font-weight:600}

  .mono{font-family:var(--mono);white-space:pre-wrap}
  textarea{min-height:160px;width:100%;resize:vertical}
  #suggest{min-height:112px}

  .progress{height:8px;border-radius:999px;background:#0c1322;border:1px solid #25304d;position:relative}
  .progress>i{position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(90deg,#3e5cf5,#34d1ff);border-radius:999px}

  .kbd{padding:2px 6px;border-radius:6px;border:1px solid #2a2f45;background:#0e1324;font-family:var(--mono);font-size:12px;color:#c6cee1}
  .iconTab{display:flex;gap:10px}
  .iconTab button{flex:1;display:flex;align-items:center;gap:10px;justify-content:center;padding:12px;border-radius:14px;background:#0e1629;border:1px solid #252c44}
  .iconTab button.active{outline:2px solid var(--ring);border-color:#3b48ff;background:#121a30}
  .iconTab img{height:18px;opacity:.9}
  .rightBox{min-height:320px}
  .hidden{display:none}
  .small{font-size:13px;color:#9fb0d1}

  .mk-hero {
    position: relative;
    padding: 2.5rem 1.5rem 2rem;
    background-image:
      linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(76, 29, 149, 0.96));
    background-size: cover;
    background-position: center;
    border-bottom: 1px solid rgba(148, 163, 184, 0.4);
  }
  .mk-hero-inner {
    max-width: 960px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 1.75rem;
  }
  .mk-title-gradient{
    background:linear-gradient(90deg,#ff7bd5 0%,#6ea8ff 100%);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .mk-hero-text h1 {
    margin: 0 0 0.35rem;
    font-size: clamp(1.9rem, 2.6vw, 2.4rem);
    font-weight: 800;
    letter-spacing: 0.12em;
    text-transform: uppercase;
  }
  .mk-hero-text p {
    margin: 0;
    color: #e5e7eb;
    font-size: 0.98rem;
    max-width: 30rem;
    line-height: 1.55;
  }
  .mk-version-icon{
    width:46px;
    height:auto;
    margin-left:10px;
    border-radius:12px;
    box-shadow:0 8px 24px rgba(0,0,0,0.35);
    vertical-align:middle;
  }
  @media(min-width:768px){
    .mk-version-icon{width:56px;}
  }

  body.focus-mode .mk-hero { display:none; }
  body.focus-mode .rightBox { display:none; }
  body.focus-mode .wrap { max-width:980px; }
  body.focus-mode #lyrics,
  body.focus-mode #suggest { min-height:220px; }
  body.focus-mode textarea{ font-size:16px; line-height:1.5; }
  body.focus-mode .title{ font-size:36px; }

  #currentChord{
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    background:#111827;
    border:1px solid #374151;
    min-width:60px;
    font-weight:600;
  }

  #log{
    resize:vertical;
    min-height:160px;
    max-height:60vh;
  }
  .log-max{
    height:60vh !important;
  }
  </style>
</head>

<body>

<header class="mk-hero">
  <div class="mk-hero-inner">
    <div class="mk-hero-text">
      <h1 class="mk-title-gradient">MUSICKINGDOM</h1>
      <p>
        Công cụ gợi ý hợp âm &amp; luyện hát trong hệ sinh thái Pi –
        không gian thờ phượng và sáng tạo dành cho Pioneers.
      </p>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="row" style="justify-content:space-between;align-items:flex-end;margin-bottom:10px">
    <h1 class="title">PiChordify Kingdom</h1>
    <div class="row" style="align-items:center;gap:8px">
      <span class="ver">v8.10 — Chord Runner</span>
      <img src="assets/musickingdom-golden-turtle.jpg" alt="Musickingdom Icon" class="mk-version-icon"/>
      <button id="btnFocusMode" class="btn ghost" style="padding:6px 10px;font-size:12px;margin-left:4px;">
        Chế độ tập trung
      </button>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <div>
          <div class="small" style="margin-bottom:8px">Nhạc cụ</div>
          <div class="iconTab" role="tablist" aria-label="instrument">
            <button id="tabPiano" class="active" aria-selected="true">Piano</button>
            <button id="tabGuitar">Guitar</button>
            <button id="tabUke">Ukulele</button>
          </div>
        </div>
        <div>
          <div class="small" style="margin-bottom:8px">Giọng (key)</div>
          <div class="row">
            <select id="selKey"></select>
          </div>
        </div>
        <div>
          <div class="small" style="margin-bottom:8px">Tiến trình</div>
          <select id="selProg">
            <option value="I-V-vi-IV">I–V–vi–IV</option>
            <option value="I-vi-IV-V">I–vi–IV–V</option>
            <option value="I-IV-V">I–IV–V</option>
          </select>
        </div>
      </div>

      <div class="row" style="margin-top:14px">
        <input id="titleEl" placeholder="Tên bài" style="flex:1"/>
        <button id="btnSuggest" class="btn">Tự gợi ý hợp âm</button>
      </div>

      <div class="row" style="margin-top:12px">
        <div style="flex:1">
          <div class="small">Lời + hợp âm (mỗi dòng có mốc thời gian — dạng: <span class="kbd">mm:ss Em / D</span>)</div>
          <textarea id="lyrics" placeholder="00:12   Em  /  D ..."></textarea>
        </div>
        <div style="flex:1">
          <div class="small">Gợi ý hợp âm</div>
          <textarea id="suggest" class="mono" readonly></textarea>
        </div>
      </div>

      <div class="row" style="margin-top:8px;align-items:flex-end">
        <div style="flex:1">
          <div class="small">Mẫu hợp âm cho cả bài (pattern)</div>
          <input id="patternInput" placeholder="Ví dụ: C G Am F | F G Em Am"/>
          <div class="small">
            Pattern sẽ lặp từ đầu đến cuối bài, mỗi hợp âm chia đều theo thời lượng MP3.
          </div>
        </div>
        <button id="btnAutoPattern" class="btn ghost">Auto fill</button>
        <small class="small">Tự điền hợp âm cho cả bài theo mẫu ở trên.</small>
      </div>

      <div style="margin-top:10px">
        <div class="row">
          <input id="audiourl" placeholder="https://…/song.mp3" style="flex:1"/>
          <input id="filepick" type="file" accept="audio/*" class="hidden"/>
          <button id="btnPick" class="btn ghost">Chọn MP3</button>
          <button id="btnLoad" class="btn ghost">Load</button>
        </div>
        <div class="row" style="margin-top:10px;align-items:center">
          <button id="btnPlay" class="btn">Play</button>
          <button id="btnPause" class="btn ghost">Pause</button>
          <button id="btnStop" class="btn bad">Stop</button>
          <span id="time" class="mono small">00:00 / 00:00</span>
        </div>
        <div class="progress" style="margin-top:8px"><i id="bar"></i></div>

        <div class="row" style="margin-top:8px;align-items:center">
          <span class="small" style="margin-right:8px">Volume</span>
          <input id="vol" type="range" min="0" max="1" step="0.01" value="1" style="flex:1;margin-right:8px"/>
          <button id="btnMute" class="btn ghost">Mute</button>
        </div>

        <div class="row" style="margin-top:6px;align-items:center">
          <span class="small">Hợp âm đang phát:</span>
          <span id="currentChord" class="mono small" style="margin-left:6px;white-space:pre;"></span>
        </div>
      </div>
    </div>

    <div class="card rightBox">
      <div class="row" style="justify-content:space-between;align-items:center">
        <h3>Đăng nhập & thanh toán</h3>
        <span class="badge">Pi Payment (LIVE)</span>
      </div>

      <div class="row" style="margin-top:8px">
        <button id="btnPiLogin" class="btn ghost">Pi Login</button>
        <button id="btnCheckPremium" class="btn ghost">Kiểm tra Premium</button>
        <button id="btnPayLive" class="btn">Pi Pay (LIVE)</button>
      </div>

      <details style="margin-top:10px">
        <summary class="small" style="cursor:pointer;">
          Cài đặt backend (dev) – chỉ chỉnh khi setup
        </summary>

        <div style="margin-top:6px; padding:6px; background:#151515; border-radius:6px;">
          <input id="backendUrl" placeholder="Backend URL"
                 style="width:75%; padding:6px; border-radius:6px; border:1px solid #333; background:#000; color:#fff;">
          <button id="btnSaveBackend"
                  style="padding:6px 12px; margin-left:4px; border-radius:6px; background:#4b7bff; border:none; color:white;">
            Save backend
          </button>
          <div style="margin-top:4px; font-size:12px; color:#aaa;">
            Current: <span id="backendNow"></span>
          </div>
        </div>
      </details>

      <div style="margin-top:12px">
        <div class="row" style="justify-content:space-between;align-items:center">
          <div class="small">Log</div>
          <button id="btnLogToggle" class="btn ghost" style="padding:4px 10px;font-size:12px;">
            Mở rộng log
          </button>
        </div>
        <textarea id="log" class="mono" style="height:180px"></textarea>
        <div class="small">Console mirror (copy/paste được) – có thể kéo dãn hoặc bấm “Mở rộng log”.</div>
      </div>
    </div>
  </div>

  <div class="small" style="margin-top:10px">© PiChordify Kingdom — Hackathon demo “có nhạc thật”</div>
</div>

<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script src="index.v11.js"></script>
</body>
</html>
